# IOT Platform - Vercel Deployment Guide

This project is configured for deployment on Vercel with the following setup:

## Project Structure for Vercel

- `api/` - Serverless API functions for Vercel
- `dist/spa/` - Built React SPA (generated by `npm run build:client`)
- `vercel.json` - Vercel deployment configuration

## Deployment Steps

### 1. Connect to Vercel

1. Go to [vercel.com](https://vercel.com) and sign in with your GitHub account
2. Click "New Project" and import your GitHub repository
3. Vercel will automatically detect the project configuration from `vercel.json`

### 2. Environment Variables (if needed)

If your application requires environment variables, add them in the Vercel dashboard:
- Go to your project settings
- Navigate to "Environment Variables"
- Add any required variables

### 3. Deployment

Vercel will automatically deploy when you push to your main branch. You can also deploy manually:

```bash
# Install Vercel CLI
npm i -g vercel

# Deploy to Vercel
vercel --prod
```

## Build Configuration

The `vercel.json` file configures:
- **Build Command**: `npm run build:client` - Builds the React SPA
- **Output Directory**: `dist/spa` - Where the built files are located
- **API Functions**: `api/*.ts` - Serverless functions using Node.js 20.x
- **Routing**: SPA routing with API route handling

## API Endpoints

The following API endpoints are available:
- `GET /api/ping` - Health check endpoint
- `GET /api/demo` - Demo endpoint that returns a JSON message

## Local Development

```bash
# Install dependencies
npm install

# Start development server (includes both frontend and backend)
npm run dev

# Build for production
npm run build:client
```

## Differences from Netlify

This project was adapted from Netlify to Vercel:
- Moved from `netlify/functions/` to `api/` folder structure
- Updated API functions to use Vercel's serverless function format
- Replaced `netlify.toml` with `vercel.json` configuration
- Added `@vercel/node` runtime dependency

## Troubleshooting

1. **Build Fails**: Ensure all dependencies are installed and build command works locally
2. **API Not Working**: Check that API routes are in the `api/` folder and use proper Vercel function format
3. **SPA Routing**: The configuration handles client-side routing by serving `index.html` for all non-API routes

## Architecture

- **Frontend**: React 18 + TypeScript + Vite + TailwindCSS
- **Backend**: Serverless functions on Vercel (Node.js)
- **Deployment**: Automatic deployment from GitHub to Vercel